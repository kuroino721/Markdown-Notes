---
description: Tauri やマルチウィンドウアプリにおけるリソース（CSS/JS）読み込みの確認とデバッグ
---

# Tauri Multi-Window Resource Verification

Tauri アプリケーションやマルチウィンドウ構成のWebアプリにおいて、意図したスタイルやスクリプトが反映されない問題を防ぐためのベストプラクティスです。

## 背景

多くのTauriアプリでは、メインウィンドウ（例: `index.html`）とサブウィンドウ（例: `note.html`、設定画面など）で異なるHTMLエントリポイントを使用します。
開発者はしばしば「全てのウィンドウで共通の `style.css` や `main.js` が読み込まれている」と誤解しがちですが、実際には各HTMLファイルで明示的に読み込む必要があります。

今回のケースでは、`src/style.css` を修正しても `src/note.html` には読み込まれておらず、代わりに `src/note.html` 内の `<style>` タグがスタイルを定義していたため、変更が反映されませんでした。

## チェックリスト

機能追加やバグ修正を行う際、特に対象が「新しいウィンドウ」や「別ウィンドウ」である場合は、以下の手順を確認してください。

1. **エントリポイントの確認**:
   - 対象のウィンドウがどの `.html` ファイルを使用しているか特定する。
   - `tauri.conf.json` やウィンドウ作成時のコード（`WebviewWindow`）を確認。

2. **読み込みリソースの特定**:
   - その `.html` ファイルを開き、`<head>` 内の `<link rel="stylesheet">` や `<script src="...">` を確認する。
   - **重要**: グローバルな `style.css` が読み込まれていない場合がある。その場合、そのファイルへの変更は無視される。

3. **インラインスタイルの確認**:
   - HTMLファイル内に `<style>` ブロックが存在しないか確認する。
   - 特に小さなウィンドウや特定用途のウィンドウでは、外部CSSを作らずにインラインでスタイル定義されていることが多い。

4. **デバッグ方法**:
   - 変更が反映されない場合、まずは「そのファイルが本当に読み込まれているか」を疑う。
   - ブラウザの開発者ツール（F12）で「Sources」タブや「Network」タブを確認し、対象のCSS/JSファイルがロードされているか確認する。
   - 特定の要素のスタイルを検証（Inspect Element）し、適用されているルールがどこから来ているか（user agent stylesheet, inline style, external css）を確認する。

## ベストプラクティス

- **共通スタイルの分離**: 複数のウィンドウで共通のスタイル（変数定義など）を使いたい場合は、`src/styles/variables.css` や `src/styles/common.css` のように切り出し、各HTMLファイルで明示的にimportする。
- **コンポーネント指向**: 可能であれば、Vue/React/SvelteなどのコンポーネントとしてUIを構築し、ビルドシステム（Viteなど）に依存解決を任せることで、手動でのインポート漏れを防ぐ。
