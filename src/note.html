<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éé„Éº„Éà</title>
    <link rel="stylesheet" href="style.css">
    <style>
        :root {
            --note-color: #fef3c7;
            --line-height: 1.4;
        }

        body {
            margin: 0;
            padding: 0;
            background: var(--note-color);
            min-height: 100vh;
        }

        .note-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: var(--note-color);
        }

        .note-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.05);
            cursor: move;
            -webkit-app-region: drag;
            user-select: none;
        }

        .note-header .title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 70%;
        }

        .note-header .actions {
            display: flex;
            gap: 4px;
            -webkit-app-region: no-drag;
        }

        .note-header .actions button {
            background: transparent;
            border: none;
            padding: 4px 8px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
            opacity: 0.7;
            transition: all 0.15s;
        }

        .note-header .actions button:hover {
            background: rgba(0, 0, 0, 0.1);
            opacity: 1;
        }

        .note-header .actions button.delete:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #dc2626;
        }

        .note-editor {
            flex: 1;
            overflow: auto;
            padding: 12px;
        }

        .note-editor #editor {
            min-height: 100%;
        }

        .note-editor #editor .ProseMirror {
            outline: none;
            min-height: 100%;
        }

        .note-footer {
            padding: 4px 12px;
            font-size: 11px;
            color: rgba(0, 0, 0, 0.4);
            background: rgba(0, 0, 0, 0.03);
            display: flex;
            justify-content: space-between;
        }

        /* Override Milkdown styles for sticky note look */
        .note-editor .milkdown {
            background: transparent !important;
        }

        .note-editor .ProseMirror {
            background: transparent !important;
            color: #1a1a1a;
        }

        .note-editor h1,
        .note-editor h2,
        .note-editor h3 {
            color: #333;
        }

        .note-editor code {
            background: rgba(0, 0, 0, 0.08);
        }

        .note-editor blockquote {
            border-left-color: rgba(0, 0, 0, 0.2);
            color: #444;
        }

        /* Mode indicator */
        .mode-badge {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 500;
            background: rgba(0, 0, 0, 0.1);
        }

        .mode-badge.editor-mode {
            background: rgba(59, 130, 246, 0.2);
            color: #1d4ed8;
        }

        /* Source editor for note */
        .note-source-container {
            flex: 1;
            display: none;
            overflow: hidden;
        }

        .note-source-container.active {
            display: flex;
        }

        .note-source-container textarea {
            flex: 1;
            border: none;
            padding: 12px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.5;
            resize: none;
            background: var(--note-color);
            color: #1a1a1a;
        }

        .note-source-container textarea:focus {
            outline: none;
        }

        .note-editor.hidden {
            display: none;
        }

        /* Settings Panel */
        .settings-panel {
            position: absolute;
            top: 40px;
            right: 12px;
            background: #fff;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 100;
            width: 200px;
        }

        .settings-panel.hidden {
            display: none;
        }

        .setting-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #333;
        }

        .setting-item input[type="range"] {
            flex: 1;
        }
    </style>
</head>

<body>
    <div class="note-container">
        <header class="note-header" data-tauri-drag-region>
            <span class="title" id="note-title">„Éé„Éº„Éà</span>
            <div class="actions">
                <button id="btn-settings" title="Ë®≠ÂÆö">‚öôÔ∏è</button>
                <button id="btn-toggle" title="„É¢„Éº„ÉâÂàáÊõø (Ctrl+/)">üìù</button>
                <button id="btn-delete" class="delete" title="ÂâäÈô§">üóëÔ∏è</button>
            </div>
        </header>

        <!-- Settings Panel -->
        <div id="settings-panel" class="settings-panel hidden">
            <div class="setting-item">
                <label>Ë°åÈñì</label>
                <input type="range" id="line-height-range" min="0.8" max="2.0" step="0.1" value="1.4">
                <span id="line-height-value">1.4</span>
            </div>
        </div>

        <main class="note-editor" id="editor-container">
            <div id="editor">
                <div contenteditable="true" style="min-height: 100%; padding: 8px; outline: none;">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
            </div>
        </main>
        <div class="note-source-container" id="source-container">
            <textarea id="source-editor" spellcheck="false" placeholder="Markdown„ÇíÂÖ•Âäõ..."></textarea>
        </div>
        <footer class="note-footer">
            <span id="save-status">‰øùÂ≠òÊ∏à„Åø</span>
            <span id="mode-indicator" class="mode-badge">WYSIWYG</span>
        </footer>
    </div>
    <script type="module" src="note.js"></script>
</body>

</html>